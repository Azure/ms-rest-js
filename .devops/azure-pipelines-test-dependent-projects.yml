jobs:
- job: prepare_ms_rest_js
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: 'npm install'
  - script: 'npm run build'

- job: clone_dependent_projects
  dependsOn: prepare_ms_rest_js
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: 'mkdir tmp'
    workingDirectory: ".."
  - script: 'git clone https://github.com/Azure/ms-rest-azure-js.git ms-rest-azure-js'
    workingDirectory: '../tmp'
    displayName: "clone ms-rest-azure-js"
  - script: 'pwd'
    workingDirectory: '../tmp'
    displayName: "pwd ms-rest-azure-js"
  - script: 'npm install'
    workingDirectory: '../tmp/ms-rest-azure-js'
    displayName: "[ms-rest-azure-js] npm install"
  - script: 'npm install $(Build.SourcesDirectory)'
    workingDirectory: '../tmp/ms-rest-azure-js'
    displayName: "npm install $(Build.SourcesDirectory)"
  - script: 'npm run test'
    workingDirectory: '../tmp/ms-rest-azure-js'
    displayName: "npm run test @ ms-rest-azure-js"
